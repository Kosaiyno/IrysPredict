<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>IrysPredict </title>

    <!-- Inline favicon to kill 404 -->
   <link rel="icon" type="image/jpeg" href="./src/logo.jpg" />

    <link rel="stylesheet" href="/src/styles.css" />
  </head>
  <body>
    <header class="topbar">
     <h1 class="logo">
        <img src="./src/logo.jpg" alt="IrysPredict logo" class="logo-img" />
        IrysPredict
     </h1>

  <div class="spacer"></div>
  <button id="themeBtn" class="pill" type="button">Dark mode</button>
  <button id="pointsInfoBtn" class="pill" type="button">How points work</button>
  <button id="walletBtn" class="btn mint" type="button">Connect Wallet</button>
    </header>

    <!-- Weekly Competition Hero (pinned) -->
    <div id="weeklyHero" class="weekly-hero" role="region" aria-label="Weekly competition" data-prize="50">
      <div class="weekly-inner">
        <div class="left">
          <h3>Weekly Showdown, Top 3 share prize pool of $50</h3>
          <p class="tagline">Juicy prizes. Fierce leaderboard. New week starts every Friday, climb the ranks and grab your share.</p>
          <div class="prize-split">
            <div class="p1"><span class="amt">$25</span><small>1st</small></div>
            <div class="p2"><span class="amt">$15</span><small>2nd</small></div>
            <div class="p3"><span class="amt">$10</span><small>3rd</small></div>
          </div>
        </div>
        <div class="right">
          <div class="countdown-box">
            <small class="muted">Week ends</small>
            <div id="weeklyCountdown" class="countdown-large">--:--:--:--</div>
            <small id="weeklyEndsLabel" class="muted">Thu · 23:59 UTC</small>
          </div>
        </div>
      </div>
    </div>

    <nav class="tabs">
      <button class="tab active" data-tab="markets" type="button">Markets</button>
      <button class="tab" data-tab="leaderboard" type="button">Leaderboard</button>
    </nav>

    <!-- Intro -->
    <section class="intro">
      <h2>Welcome to IrysPredict</h2>
      <p>
        IrysPredict is a simple prediction game built on Irys.
        You pick if an asset’s price will finish higher or lower than it is right now when the <b>5-minute</b> round ends.
        Once you choose Up or Down, you sign with your wallet and your bet is stored permanently on Irys.
  When the round ends, the app checks the prices, if you predicted right, you earn points and move up on the global leaderboard.
      </p>

      <div class="notice">
        Round length: <b>5 minutes</b>
      </div>
    </section>
    <main>
      <section id="markets" class="tabpane active">
        <div class="cards">

          <!-- BTC -->
          <div class="card" data-asset="BTC">
            <div class="card-head">
              <div>
                <h3>BTC · 5m</h3>
                <small class="status live">Live · Ends in <span class="countdown">05:00</span></small>
              </div>
              <!-- Will be set to the bet’s receipt after you place a bet -->
              <a class="link betLink" href="#" target="_blank" rel="noreferrer" hidden>View on Irys ↗</a>
            </div>
            <div class="odds">
              <div><b class="pct up">--%</b> UP</div>
              <div><b class="pct down">--%</b> DOWN</div>
            </div>
            <div class="actions">
              <button class="btn up betBtn" data-side="UP" type="button">UP</button>
              <button class="btn down betBtn" data-side="DOWN" type="button">DOWN</button>
            </div>
          </div>

          <!-- ETH -->
          <div class="card" data-asset="ETH">
            <div class="card-head">
              <div>
                <h3>ETH · 5m</h3>
                <small class="status live">Live · Ends in <span class="countdown">05:00</span></small>
              </div>
              <!-- Will be set to the bet’s receipt after you place a bet -->
              <a class="link betLink" href="#" target="_blank" rel="noreferrer" hidden>View on Irys ↗</a>
            </div>
            <div class="odds">
              <div><b class="pct up">--%</b> UP</div>
              <div><b class="pct down">--%</b> DOWN</div>
            </div>
            <div class="actions">
              <button class="btn up betBtn" data-side="UP" type="button">UP</button>
              <button class="btn down betBtn" data-side="DOWN" type="button">DOWN</button>
            </div>
          </div>
        </div>

        <!-- Did You Know -->
        <section id="dyk" class="dyk">
          <div class="dyk-inner">
            <div class="dyk-head">
              <div>
                <h3>Did you know?</h3>
                <small class="muted">Quick bites about Irys · rotates every few seconds</small>
              </div>
              <div class="dyk-ctrl">
                <button id="dykPrev" class="btn ghost" type="button" aria-label="Previous fact">‹</button>
                <button id="dykNext" class="btn ghost" type="button" aria-label="Next fact">›</button>
              </div>
            </div>

            <blockquote class="dyk-card">
              <p id="dykText">-</p>
              <a id="dykLink" class="dyk-link" href="#" target="_blank" rel="noreferrer">Learn more ↗</a>
              <div class="dyk-dots" id="dykDots"></div>
            </blockquote>
          </div>
        </section>
      </section>

      <!-- Leaderboard -->
      <section id="leaderboard" class="tabpane">
        <div class="lb-head">
          <h2 id="lbTitle">Leaderboard (rolling 7 days)</h2>
          <div class="lb-ctrl">
            <label class="muted">Window:</label>
            <div id="lbRangePills" class="segmented" role="tablist" aria-label="Leaderboard timeframe">
              <button class="seg-btn" data-days="7" aria-pressed="true" type="button">7 days (week)</button>
              <button class="seg-btn" data-days="0" aria-pressed="false" type="button">All time</button>
            </div>
          </div>
        </div>

        <div class="table-wrap">
          <table class="table table-lb" aria-label="Leaderboard">
            <thead>
              <tr>
                <th>#</th>
                <th>Wallet</th>
                <th>Points</th>
                <th>Wins</th>
                <th>Losses</th>
                <th class="col-hide-sm">Streak</th>
                <th class="col-hide-sm">Best</th>
              </tr>
            </thead>
            <tbody id="lbBody">
              <tr><td>-</td><td>-</td><td>0</td><td>0</td><td>0</td><td class="col-hide-sm">0</td><td class="col-hide-sm">0</td></tr>
            </tbody>
          </table>
        </div>
        <!-- (Removed the extra "How points work" button that was below the table) -->
      </section>
    </main>

    <!-- Bet Modal -->
    <dialog id="betModal" class="modal">
      <form method="dialog" class="modal-box" id="betForm">
        <h3>Place Prediction</h3>
        <p class="muted">
          Asset: <span id="assetSpan"></span> · Side: <span id="sideSpan"></span>
          · Price now: <span id="priceAtSelection">$--</span>
        </p>
        <label class="label">Reason (optional, 140 chars):</label>
        <textarea id="reason" maxlength="140" class="textarea" placeholder="Why? TA / News / Gut..."></textarea>
        <div class="modal-actions">
          <button class="btn ghost" value="cancel" type="button" id="cancelBtn">Cancel</button>
          <button class="btn mint" id="confirmBtn" value="default" type="submit">Confirm Prediction</button>
        </div>
        <p class="muted small">Prototype.</p>
      </form>
    </dialog>

    <!-- Round Start Modal -->
    <dialog id="roundModal" class="modal">
      <div class="modal-box round-start-box">
        <h2>New Round</h2>
        <p class="muted">You have 5 minutes per round.</p>
        <p class="muted">Next round begins in <span id="roundCountdown">0:05</span>…</p>
        <button id="startRoundBtn" class="btn mint" type="button">Start</button>
      </div>
    </dialog>

    <!-- Points Rules Modal -->
    <dialog id="pointsModal" class="modal">
      <div class="modal-box">
        <h3>How points work</h3>
        <ul class="rules">
          <li><b>+10</b> for every correct prediction (win)</li>
          <li><b>−6</b> for a wrong prediction (loss)</li>
          <li><b>Streak boost:</b> each win in a row adds <b>+2</b> for that win (capped at <b>+10</b>)</li>
          <li><b>Daily activity:</b> first 10 rounds you play today give <b>+1</b> each (max <b>+10</b>)</li>
          <li><b>Anti-spam tax:</b> after 20 rounds today, you only earn <b>50%</b> of normal points until tomorrow</li>
          <li><b>One global streak:</b> any loss (on any asset) resets it</li>
        </ul>
        <div class="examples">
          <p class="muted small"><b>Example:</b> 3 wins in a row = <code>10 + (10+2) + (10+4) = 36</code> points.</p>
          <p class="muted small">A loss after that: <code>−6</code> and streak resets.</p>
        </div>
        <div class="modal-actions">
          <button id="closePointsBtn" class="btn mint" type="button">Got it</button>
        </div>
      </div>
    </dialog>

    <!-- (Removed footer “IrysPredict · Prototype”) -->

    <!-- Cache-bust query to force clients to fetch the latest bundle after deploy -->
    <script type="module" src="/src/app.js?v=20251030"></script>
  </body>
</html>
